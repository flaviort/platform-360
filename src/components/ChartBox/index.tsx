// libraries
import clsx from 'clsx'

// components
import HorizontalBars from '@/components/Reports/Charts/HorizontalBars'
import VerticalBars from '@/components/Reports/Charts/VerticalBars'
import Colors from '@/components/Reports/Charts/Colors'
import PositiveNegativeBars from '@/components/Reports/Charts/PositiveNegativeBars'
import ProductPrice from '@/components/Reports/NonCharts/ProductPrice'

// svg
import { Sparkle } from 'lucide-react'

// styles
import styles from './index.module.scss'

// interface
interface ChartBoxProps {
    title?: string
    description?: string
    AIGenerated?: boolean
    AIChatChart?: boolean
    boxSize: 'half' | 'full'
    chart: {
        horizontal?: Array<{
            name: string
            value: number
            color: string
        }>
        vertical?: Array<{
            label: string
            value: number
        }>
        colors?: Array<{
            color: string
            count: number
        }>
        verticalGrouped?: Array<{
            label: string
            value: number
        }>
        positiveNegative?: Array<{
            name: string
            value: number
            color: string
        }>
        productPrice?: Array<{
            name: string
            price: string
            image: string
        }>
    }
}

export default function ChartBox({
    title,
    description,
    AIGenerated,
    AIChatChart,
    boxSize = 'half',
    chart
}: ChartBoxProps) {
    return (
        <div className={clsx(
            styles.component,
            boxSize === 'full' && styles.full,
            boxSize === 'half' && styles.half
        )}>

            <div className={styles.header}>

                {!AIChatChart && (title || description) && (
                    <div className={styles.left}>

                        {title && (
                            <h3 className='bold'>
                                {title}
                            </h3>
                        )}

                        {description && (
                            <p className='text-14'>
                                {description}
                            </p>
                        )}

                    </div>
                )}

                {!AIChatChart && AIGenerated && (
                    <div className={styles.right}>

                        <div
                            className={styles.AIGenerated}
                            aria-label='This chart was generated by A.I.'
                            data-balloon-pos='up'
                        >

                            <Sparkle />

                            <span className='text-12 semi-bold'>
                                Gen by A.I.
                            </span>

                        </div>

                    </div>
                )}

            </div>

            <div className={styles.chart}>
                
                {chart.horizontal && (
                    <HorizontalBars data={chart.horizontal} />
                )}

                {chart.vertical && (
                    <VerticalBars data={chart.vertical} />
                )}

                {chart.colors && (
                    <Colors data={chart.colors} />
                )}

                {chart.positiveNegative && (
                    <PositiveNegativeBars data={chart.positiveNegative} />
                )}

                {chart.productPrice && (
                    <ProductPrice data={chart.productPrice} />
                )}

            </div>

        </div>
    )
}